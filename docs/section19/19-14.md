# Section 19 - Rule 19-14             
**Schema Version:** 0.0.23    
**Mandatory Rule:** True    
**Rule ID:** 19-14               
**Rule Description:**  For baseline system types 1-8 and 11-13, if return or relief fans are specified in the proposed design, the baseline building design shall also be modeled with fans serving the same functions and sized for the baseline system supply fan air quantity less the minimum outdoor air, or 90% of the supply fan air quantity, whichever is larger.

**Rule Assertion:** Options are Pass/Fail/NOT_APPLICABLE/UNDETERMINED      
**Appendix G Section:** G3.1.2.8.1 Excluding Exceptions 1 and 2 (I don't think these are relevant to this part of G3.1.2.8.1)           
**90.1 Section Reference:** None  

**Data Lookup:** None    

**Evaluation Context:** Each HeatingVentilatingAirConditioningSystem  

**Applicability Checks:**  
1. Applies to baseline HVAC system types 1-8 and 11-13.   
  
   
**Function Calls:**  
1. get_baseline_system_types()    
2. baseline_system_type_compare()  
3. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()   
4. get_zone_supply_return_exhaust_relief_terminal_fan_power_dict()  
5. match_data_element()  
6. get_component_by_id()  
7. get_fan_system_object_supply_return_exhaust_relief_total_kW_CFM() 

## Rule Logic:   
**Applicability Check 1 - Check if there are any Applicable Baseline System Types in the Project at All**   
- Create a list of the target system types: `target_system_types = [HVAC_SYS.SYS_1, HVAC_SYS.SYS_2, HVAC_SYS.SYS_3, HVAC_SYS.SYS_4, HVAC_SYS.SYS_5, HVAC_SYS.SYS_6, HVAC_SYS.SYS_7, HVAC_SYS.SYS_8, HVAC_SYS.SYS_11, HVAC_SYS.SYS_12, HVAC_SYS.SYS_13]`  
- Create dictionary of baseline system types: `baseline_system_types_dict = get_baseline_system_types(B_RMI)`  
- Check if B-RMR is modeled with at least one applicable air-side system, if yes then carry on, if no then NOT_APPLICABLE for the project: `if any(baseline_system_type_compare(system_type, target_sys_type, false) for system_type in baseline_hvac_system_dict.keys() for target_system_type in target_system_types):` 
    - Create dictionary of hvac systems and associated zones and terminal units: `dict_of_zones_and_terminal_units_served_by_hvac_sys_b = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMI)`  
    - Create dictionary with each zone's supply, return, exhaust, relief, terminal fan power as a list {zone.id: {"Fan_Power": [supply fan power kW, return fan power kW, exhaust fan power kW, relief fan power kW, terminal fan power]}}: `zone_supply_return_exhaust_relief_terminal_fan_power_dict = get_zone_supply_return_exhaust_relief_terminal_fan_power_dict(P_RMI)`  
    - For each hvac system in the B_RMI: `for hvac in B_RMI...HeatingVentilatingAirConditioningSystem:` 
        - Get the baseline system type: `sys_type = list(baseline_system_types_dict.keys())[list(baseline_system_types_dict.values()).index(hvac.id)])`
        - Check if system type is of an applicable system type, if yes then carry on, if no then NOT_APPLICABLE for the hvac system:  `if any(baseline_system_type_compare(sys_type, target_sys_type, false) for target_system_type in target_system_types):`      
            - Reset is modeled with a return fan in the proposed boolean variable: `is_modeled_with_return_fan_in_proposed = false`  
            - Reset is modeled with a relief fan in the proposed boolean variable: `is_modeled_with_relief_fan_in_proposed = false`   
            - Get list of zones served by the hvac system: `zones_list_hvac_sys_b = dict_of_zones_and_terminal_units_served_by_hvac_sys_b[hvac.id]["ZONE_LIST"]`  
            - For each zone in the B_RMI check to see if the zone is served by an hvac system with return or relief fans in the proposed: `for zone in zones_list_hvac_sys_b:`  
                - Get the analogous zone object from the proposed RMI (if this is not strictly the correct syntax please advise Weili): `zone_p = get_component_by_id(P_RMI,match_data_element(P_RMI,Zone,zone.id))`  
                - Get list of the zone's supply, return, exhaust, and relief fan power modeled in the proposed: `modeled_fan_power_list_p = list(zone_supply_return_exhaust_relief_terminal_fan_power_dict[zone_p.id])`  
                - Get the zone's total return fan kW, need to get the second element in the list of fan powers:`modeled_return_fan_power_p = modeled_fan_power_list_p[1]` 
                - Get the zone's total relief fan kW, need to get the fourth element in the list of fan powers:`modeled_relief_fan_power_p = modeled_fan_power_list_p[3]` 
                - Check if the total return fan power is greater than 0 in the proposed, if yes then set is_modeled_with_return_fan_in_proposed to true: `if modeled_return_fan_power_p > 0: is_modeled_with_return_fan_in_proposed = true`  
                - Check if the total relief fan power is greater than 0 in the proposed, if yes then set is_modeled_with_relief_fan_in_proposed to true: `if modeled_relief_fan_power_p > 0: is_modeled_with_relief_fan_in_proposed = true`  
                            

            - Create fan system object: `fan_sys_b = hvac.fan_system`  
            - Get list from dictionary of the hvac system's fan system's supply, return, exhaust and relief fan CFM: `fan_sys_CFM = list(get_fan_system_object_supply_return_exhaust_relief_total_kW_CFM(B_RMI,fan_sys_b)["Fan_Power"]["Fan_CFM"])`  
            - Get the hvac system total supply fan cfm, need to get the first element in the list of fan cfms (this assumes that all fans associated with the supply_fans object are in parallel (i.e., if multiple fans the cfm is additive.):`hvac_sys_total_supply_fan_cfm_b = fan_sys_CFM[0]` 
            - Calculate 90% of the supply air quantity: `90_percent_supply_cfm = 90% * hvac_sys_total_supply_fan_cfm_b`   
            - Calculate the supply CFM minus the minimum OA CFM for the fan system: `supply_minus_OA_cfm = hvac_sys_total_supply_fan_cfm_b - fan_sys_b.minimum_outdoor_airflow`  
            - Check if is_modeled_with_return_fan_in_proposed == true, if so then set the modeled_cfm equal to the return cfm (second element in list of baseline hvac fan cfms): `if is_modeled_with_return_fan_in_proposed == true: modeled_cfm = fan_sys_CFM[1]`  
            - Else, is_modeled_with_relief_fan_in_proposed == true, then set the modeled_cfm equal to the relief cfm (fourth element in list of baseline hvac fan cfms): `Else: modeled_cfm = fan_sys_CFM[3]`   

            - **Rule Assertion:** 
            - Case 1: If return or relief fans are specified in the proposed design (but not both) and the baseline building design is modeled with fans serving the same functions and sized for the baseline system supply fan air quantity less the minimum outdoor air, or 90% of the supply fan air quantity, whichever is larger then pass: `if (all(is_modeled_with_return_fan_in_proposed, is_modeled_with_relief_fan_in_proposed) == false) and (is_modeled_with_return_fan_in_proposed == true or is_modeled_with_relief_fan_in_proposed == true) and (modeled_cfm == max(supply_minus_OA_cfm,90_percent_supply_cfm)): outcome = "PASS"`  
            - Case 2: Else if both return or relief fans are specified in the proposed design then outcome is UNDETERMINED: `elif all(is_modeled_with_return_fan_in_proposed, is_modeled_with_relief_fan_in_proposed) == true: outome = "UNDETERMINED" and raise_message "Return and relief fans both appear to be modeled in the proposed design, conduct manual check that the baseline building design is modeled with fans serving the same functions and sized for the baseline system supply fan air quantity less the minimum outdoor air, or 90% of the supply fan air quantity, whichever is larger per Section G3.1.2.8.1."`  
            - Case 3: Else if no return or relief fans were modeled in the proposed design model and no cfm was modeled for return or relief fans in the baseline model then pass: `elif is_modeled_with_return_fan_in_proposed == false and is_modeled_with_relief_fan_in_proposed == false and fan_sys_CFM[1] == 0 and fan_sys_CFM[3] == 0: outcome = "PASS"`  
            - Case 3: Else, fail: `Else: outcome = "Fail"`


**Notes/Questions:**  
1. What if there is both a return and relief fan modeled in the proposed?  Right now i made it undetermined for this scenario since it is not clear how this should be handled. Maybe assuming the return fan gets the maximum of 90% of supply cfm or supply cfm - min OA CFM?  
2. See comments regarding multiple fan objects and CFM within the RDS.

**[Back](_toc.md)**