# Section 19 - Rule 19-7               
**Schema Version:** 0.0.23    
**Mandatory Rule:** True    
**Rule ID:** 19-7                 
**Rule Description:**  Minimum ventilation system outdoor air intake flow shall be the same for the proposed design and baseline building design except when any of the 4 exceptions defined in Section G3.1.2.5 are met.  
Exceptions
1. When modeling demand control ventilation in the proposed design in systems with outdoor air capacity less than or equal to 3000 cfm serving areas with an average design capacity of 100 people per 1000 ft^2 or less.  
2. When designing systems in accordance with Standard 62.1, Section 6.2, “Ventilation Rate Procedure,” reduced ventilation airflow rates may be calculated for each HVAC zone in the proposed design with a zone air distribution effectiveness (Ez) > 1.0 as defined by Standard 62.1, Table 6-2. Baseline ventilation airflow rates in those zones shall be calcu-lated using the proposed design Ventilation Rate Procedure calculation with the following change only. Zone air distribution effectiveness shall be changed to (Ez) = 1.0 in each zone having a zone air distribution effectiveness (Ez) > 1.0. Proposed design and baseline build-ing design Ventilation Rate Procedure calculations, as described in Standard 62.1, shall be submitted to the rating authority to claim credit for this exception. M
3. Where the minimum outdoor air intake flow in the proposed design is provided in excess of the amount required by the building code or the rating authority, the baseline building design shall be modeled to reflect the greater of that required by either the rating authority or the building code and will be less than the proposed design. 
4. For baseline systems serving only laboratory spaces that are prohibited from recirculating return air by code or accreditation standards, the baseline system shall be modeled as 100% outdoor air. 

**Rule Assertion:** Options are Pass/Fail/UNDETERMINED      
**Appendix G Section:** G3.1.2.5 and Exceptions 1-4           
**90.1 Section Reference:** None  

**Data Lookup:** None    

**Evaluation Context:** Each HeatingVentilatingAirConditioningSystem  

**Applicability Checks:**  None
   
**Function Calls:**  
1. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()    
2. match_data_element()  
3. get_component_by_id()  
4. get_list_hvac_systems_associated_with_zone()  


## Rule Logic:   
- Create dictionary of hvac systems and associated zones and terminal units for the baseline: `dict_of_zones_and_terminal_units_served_by_hvac_sys_b = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMI)`   
- For each hvac system in the B_RMI: `for hvac in B_RMI...HeatingVentilatingAirConditioningSystem:`  
    - Reset was_DCV_modeled_baseline boolean variable to false: `was_DCV_modeled_baseline = false`  
    - Reset was_DCV_modeled_proposed boolean variable to false: `was_DCV_modeled_proposed = false`  
    - Reset zone_air_distribution_effectiveness_greater_than_1 boolean to false: `zone_air_distribution_effectiveness_greater_than_1 = false`  
    - Reset modeled_proposed_total_zone_min_OA_CFM to zero: `modeled_proposed_total_zone_min_OA_CFM =0`  
    - Reset modeled_baseline_total_zone_min_OA_CFM to zero: `modeled_baseline_total_zone_min_OA_CFM =0` 
    - Reset hvac_system_serves_only_labs boolean variable to true: `hvac_system_serves_only_labs = true`  
    - Check if demand controlled ventilation was modeled at the fan_system: `if hvac.fan_system.demand_control_ventilation_control == true: was_DCV_modeled_baseline= true`  
    - Get list of zones served by the hvac system: `zones_list_hvac_sys_b = dict_of_zones_and_terminal_units_served_by_hvac_sys_b[hvac.id]["ZONE_LIST"]`  
    - For each zone in the B_RMI: `for zone in zones_list_hvac_sys_b:`  
        - For each space associated with the zone, check if any spaces are NOT labs: `for space in zone.spaces:`
            - Check if the lighting space type is NOT a lab: `if space.lighting_space_type not in [LABORATORY_EXCEPT_IN_OR_AS_A_CLASSROOM]: hvac_system_serves_only_labs = false`    
        - For each terminal unit serving the zone, add the minimum OA cfm to the modeled_baseline_total_zone_min_OA_CFM: `for terminal in zone.terminals:`  
            - Add the minimum OA cfm to the modeled_baseline_total_zone_min_OA_CFM: `modeled_baseline_total_zone_min_OA_CFM = modeled_baseline_total_zone_min_OA_CFM + terminal.minimum_outdoor_airflow`  
            - Check if DCV was modeled: `if terminal.has_demand_control_ventilation == true: was_DCV_modeled_baseline = true`  
        - Get the analogous zone object from the proposed RMI (if this is not strictly the correct syntax please advise Weili): `zone_p = get_component_by_id(P_RMI,match_data_element(P_RMI,Zone,zone.id))`    
        - Check if the air distribution effectiveness is greater than 1: `if zone_p.air_distribution_effectiveness >1: zone_air_distribution_effectiveness_greater_than_1 = true`  
        - For each terminal unit serving the zone, add the minimum OA cfm to the modeled_proposed_total_zone_min_OA_CFM: `for terminal in zone_p.terminals:`  
            - Add the minimum OA cfm to the modeled_proposed_total_zone_min_OA_CFM: `modeled_proposed_total_zone_min_OA_CFM = modeled_proposed_total_zone_min_OA_CFM + terminal.minimum_outdoor_airflow`  
            - Check if DCV was modeled: `if terminal.has_demand_control_ventilation == true: was_DCV_modeled_proposed = true`  
            - Check if the hvac system serving the terminal unit has dcv modeled (weili may have to include some logic to get the hvac object from the id): `if terminal.served_by_heating_ventilating_air_conditioning_system.fan_system.demand_control_ventilation_control == true: was_DCV_modeled_proposed`  
            
        - **Rule Assertion:** 
        - Case 1: If the modeled baseline and proposed minimum OA cfm values are identical then pass: `if modeled_baseline_total_zone_min_OA_CFM == modeled_proposed_total_zone_min_OA_CFM: outcome = "PASS"`  
        - Case 2: Else if the modeled baseline minimum OA cfm are greater than the modeled proposed minimum OA cfm and a zone served by the HVAC in the baseline has demand controlled ventilation modeled in the proposed (Exception 1) then the outcome is UNDETERMINED: `elif modeled_baseline_total_zone_min_OA_CFM > modeled_proposed_total_zone_min_OA_CFM and was_DCV_modeled_baseline == false and was_DCV_modeled_proposed == true: outome = "UNDETERMINED" and raise_message "For <insert hvac.id> the baseline modeled minimum ventilation system outdoor air intake flow CFM appears higher than the minimum ventilation system outdoor air intake flow CFM modeled in the proposed design. It appears as though G3.1.2.5 Exception 1 may be applicable. A manual check for this exception is recommended otherwise fail."`  
        - Case 3: Else if the modeled baseline minimum OA cfm are greater than the modeled proposed minimum OA cfm and a zone served by the HVAC in the baseline has an air distribution effectivenss of greater than 1 in the proposed (Exception 2) then the outcome is UNDETERMINED: `elif modeled_baseline_total_zone_min_OA_CFM > modeled_proposed_total_zone_min_OA_CFM and zone_air_distribution_effectiveness_greater_than_1 == true: outome = "UNDETERMINED" and raise_message "For <insert hvac.id> the modeled baseline minimum ventilation system outdoor air intake flow CFM appears higher than the minimum ventilation system outdoor air intake flow CFM modeled in the proposed design. It appears as though G3.1.2.5 Exception 2 may be applicable. A manual check for this exception is recommended otherwise fail."`  
        - Case 4: Else if the modeled baseline minimum OA cfm are greater than the modeled proposed minimum OA cfm and the hvac system only serves lab spaces (Exception 4) the outcome is UNDETERMINED: `elif modeled_baseline_total_zone_min_OA_CFM > modeled_proposed_total_zone_min_OA_CFM and hvac_system_serves_only_labs == true: outome = "UNDETERMINED" and raise_message "For <insert hvac.id> the modeled baseline minimum ventilation system outdoor air intake flow CFM appears higher than the minimum ventilation system outdoor air intake flow CFM modeled in the proposed design. It appears as though G3.1.2.5 Exception 4 may be applicable. This exception states that for baseline systems serving only laboratory spaces that are prohibited from recirculating return air by code or accreditation standards, the baseline system shall be modeled as 100% outdoor air. A manual check for this exception is recommended otherwise fail."`  
        - Case 5: Else if the modeled baseline minimum OA cfm are less than the modeled proposed minimum OA cfm the outcome is FAIL: `elif modeled_baseline_total_zone_min_OA_CFM < modeled_proposed_total_zone_min_OA_CFM: outome = "FAIL" and raise_message "For <insert hvac.id> the modeled minimum ventilation system outdoor air intake flow CFM appears lower than the minimum ventilation system outdoor air intake flow CFM modeled in the proposed design. Fail unless G3.1.2.5 Exception 3 is applicable. This exception states that where the minimum outdoor air intake flow in the proposed design is provided in excess of the amount required by the building code or the rating authority, the baseline building design shall be modeled to reflect the greater of that required by either the rating authority or the building code and will be less than the proposed design. "`  
        - Case 6: Else, fail: `Else: outcome = "Fail" and raise_message "For <insert hvac.id> the modeled baseline minimum ventilation system outdoor air intake flow CFM appears higher than the minimum ventilation system outdoor air intake flow CFM modeled in the proposed design which does not meet the requirements of Section G3.1.2.5."`


**Notes/Questions:**  
1. For figuring out the proposed OA CFM the easiest way is to aggregate the terminal.minimum_outdoor_airflow. I used the same method then for the baseline. Perhaps it would be better for me to use an approach similar to what was used for allocating fan power by zone and apportion HVAC fan_system minimum_outdoor_airflow based on each terminals proportion of minimum_outdoor_airflow although they should sum to equal, right? This is what I am not sure of. I would like to discuss this.
2. I did not account for OA schedule fractions. This was assessed in Section 4 I believe. Let me know if you think they should be included in the assessment of alignment between the baseline and proposed.  
3. The raise messages are getting long, I did not add the exception language to cases 2 and 3. Do we think its important to include this?

**[Back](_toc.md)**