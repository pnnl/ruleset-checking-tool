# Section 19 - Rule 19-20         
**Schema Version:** 0.0.23    
**Mandatory Rule:** True    
**Rule ID:** 19-20       
**Rule Description:** For baseline systems 9 and 10 the system fan electrical power (Pfan) for supply, return, exhaust, and relief shall be CFMs × 0.3, where, CFMs = the baseline system maximum design supply fan airflow rate, cfm.    
**Rule Assertion:** Options are Pass/Fail/NOT_APPLICABLE/UNDETERMINED         
**Appendix G Section:** G3.1.2.9        
**90.1 Section Reference:** None  

**Data Lookup:** None  

**Evaluation Context:** Each HeatingVentilatingAirConditioningSystem  

**Applicability Checks:** 
1. Applies to baseline HVAC system types 9 and 10.

**Function Calls:**  
1. get_baseline_system_types()    
2. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()   
3. get_fan_object_electric_power()  
4. baseline_system_type_compare 

## Rule Logic:   
**Applicability Check 1**      
- Create a list of the target system types: `target_system_types = [HVAC_SYS.SYS_9, HVAC_SYS.SYS_10]`  
- Create dictionary of baseline system types: `baseline_system_types_dict = get_baseline_system_types(B_RMI)`  
- Check if B-RMR is modeled with at least one air-side system that is of type 9 or 10, if yes then carry on, if no then NOT_APPLICABLE for the project: `if any(baseline_system_type_compare(system_type, target_sys_type, false) for system_type in baseline_hvac_system_dict.keys() for target_system_type in target_system_types):`  
    - Create dictionary of hvac systems, zones, and terminal units: `dict_of_zones_and_terminal_units_served_by_hvac_sys = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMI)`
    - For each hvac system in the B_RMI: `for hvac in B_RMI...HeatingVentilatingAirConditioningSystem:` 
        - Reset zone_hvac_in_PR_has_non_mech_cooling to False: `zone_hvac_in_PR_has_non_mech_cooling = False`  
        - Reset zones_served_by_BL_hvac_has_non_mech_cooling boolean variable to false: `zones_served_by_BL_hvac_has_non_mech_cooling = False` 
        - Get the baseline system type: `sys_type = list(baseline_system_types_dict.keys())[list(baseline_system_types_dict.values()).index(hvac.id)])`
        - Check if system type is of an applicable system type:  `If (baseline_system_type_compare(sys_type, HVAC_SYS.SYS_9, false) == TRUE OR baseline_system_type_compare(sys_type, HVAC_SYS.SYS_10, false) == TRUE):`     
            - Get the list of zones associated with the hvac system: `zone_list = dict_of_zones_and_terminal_units_served_by_hvac_sys[hvac.id]["ZONE_LIST"]`  
            - Reset supply cfm to zero: `supply_cfm_b = 0`  
            - Reset total_fan_power to zero: `total_fan_power = 0`   
            - Reset fan_power_W_CFM to zero: `fan_power_W_CFM = 0`                 
            - Get the fan system object:  `fan_sys_b = hvac.fan_system`  
            - Get list of supply fan fan objects: `fan_sys_supply_list = list(fan_sys_b.supply_fans)`  
            - Get list of return fan fan objects: `fan_sys_return_list = list(fan_sys_b.return_fans)`
            - Get list of relief fan fan objects: `fan_sys_relief_list = list(fan_sys_b.relief_fans)`
            - Get list of exhaust fan fan objects: `fan_sys_exhaust_list = list(fan_sys_b.exhaust_fans)`
                    
            Below cycles through all fans associated with the HVAC system and sums the total fan kW.
            - Cycle through the list of supply fans: `for fan_b in fan_sys_supply_list:`  
                - Get the supply cfm and add to cumulative supply cfm as the logic cycles through the supply fans: `supply_cfm_b = supply_cfm_b + fan_b.design_airflow`  
                - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`
            - Cycle through the list of return fans: `for fan_b in fan_sys_return_list:`  
                - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`
            - Cycle through the list of relief fans: `for fan_b in fan_sys_relief_list:`  
                - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`       
            - Cycle through the list of exhaust fans: `for fan_b in fan_sys_exhaust_list:`  
                - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`     
            - Cycle through each zone associated with the HVAC system to get the exhaust fan power: `for zone_b in zone_list:`  
                - Create a zone object from the zone id (not sure how the RCT will do this): `zone_b_obj = zone_b`  
                - Check if there are any exhaust fan objects associated with the zone: `if zone_b_obj.zonal_exhaust_fan != Null:`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,zone_b_obj.zonal_exhaust_fan)`    
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`     
                - Get the analogous zone object in the P_RMI: `zone_p = match_data_element(P_RMR,Zone,zone_b.id)` 
                - Check if the zone has mechanical cooling in the proposed: `If (zone_p.non_mechanical_cooling_fan_airflow != Null AND zone_p.non_mechanical_cooling_fan_airflow != 0): zones_served_by_BL_hvac_has_non_mech_cooling = True`  
                - Get list of hvac systems serving this zone in the proposed design model: `hvac_sys_list_p = Get_list_hvac_systems_associated_with_zone(P_RMI, zone_p)`  
                - Check if any of the hvac systems serving the zone have non-mechanical cooling as the cooling_system type: `for hvac_p in hvac_sys_list_P:`  
                    - Check if the system has non-mechanical cooling: `if hvac_p.cooling_system.cooling_system_options == "NON_MECHANICAL": zone_hvac_in_PR_has_non_mech_cooling = True`  

            - Calculate W/CFM: `fan_power_W_CFM = total_fan_power/supply_cfm_b`                 
            
            - **Rule Assertion:** 
            - Case 1: If fan_power_W_CFM equals 0.3: `if fan_power_W_CFM == 0.3: outcome = "PASS"`  
            - Case 2: Elif conservative comparison less equal:`elif AHJ_RA_compare == True and fan_power_W_CFM <= 0.3: PASS`  
            - Case 3: Elif there is non-mechanical cooling associated with the zones served by the baseline HVAC system (should just be one) in the proposed model then the outcome is UNDETERMINED: `if zone_hvac_in_PR_has_non_mech_cooling ==  True or zones_served_by_BL_hvac_has_non_mech_cooling ==  True: outcome = UNDETERMINED and raise_message "<Insert hvac.id> has zone(s) with non-mechanical cooling in the proposed design, conduct a manual check that the baseline building design includes a fan power allowance of Pfan = CFMnmc × 0.054, where, CFMnmc = the baseline non-mechanical cooling fan airflow, cfm for the non-mechanical cooling fan in additional to the 0.3 W/CFM allowance for the HVAC system."`  
            - Case 4: Else, fail: `Else: outcome = "Fail"`  

**Notes/Questions:**  
1. I don't need case 1 but I put it here just so the RCT could see the "perfect" result.

**[Back](_toc.md)**