# Section 19 - Rule 19-19       
**Schema Version:** 0.0.23    
**Mandatory Rule:** True    
**Rule ID:** 19-19     
**Rule Description:** For baseline systems 3 through 8, and 11, 12, and 13, the system fan electrical power for supply, return, exhaust, and relief shall be Pfan = bhp Ã— 746/fan motor efficiency. Where, bhp = brake horsepower of baseline fan motor from Table G3.1.2.9; fan motor efficiency = the efficiency from Table G3.9.1 for the next motor size greater than the bhp using a totally enclosed fan cooled motor at 1800 rpm.      
**Rule Assertion:** Options are Pass/UNDETERMINED/NOT_APPLICABLE     
**Appendix G Section:** G3.1.2.9          
**90.1 Section Reference:** Table G3.9.1    

**Data Lookup:** Table G3.9.1    

**Evaluation Context:** Each HeatingVentilatingAirConditioningSystem  

**Applicability Checks:** 
1. Applies to baseline systems 3 through 8, and 11, 12, and 13.

**Function Calls:**  
1. get_baseline_system_types()    
2. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()   
3. get_fan_object_electric_power()  

## Rule Logic:   
**Applicability Check 1**   
- Create ditionary of baseline system types: `baseline_system_types_dict = get_baseline_system_types(B_RMR)`  
- Check if B-RMI is modeled with at least one air-side system that is of type 3 through 8, and 11, 12, and 13, if yes then carry on, if no then NOT_APPLICABLE for the project: `for sys_type in ["SYS-3", "SYS-3a", "SYS-3b", "SYS-3c", "SYS-4", "SYS-5", "SYS-5b", "SYS-6", "SYS-6b","SYS-7", "SYS-7a", "SYS-7b", "SYS-7c","SYS-8", "SYS-8a", "SYS-8b", "SYS-8c","SYS-11.1", "SYS-11.1a", "SYS-11b", "SYS-11c","SYS-11.2","SYS-11.2a","SYS-12", "SYS-12a", "SYS-12b", "SYS-12c","SYS-13", "SYS-13a"]):`
    - Check if values are not none for system type key in the dictionary, if it does not equal false then the values are not none and there are applicable system types in the project: `if bool(baseline_system_types_dict.get(sys_type)) != False: is_there_applicable_sys_type = TRUE`
- Check if is_there_applicable_sys_type == True which means there are applicable system types in the project, if yes then carry on, if no then NOT_APPLICABLE for the project: `if  is_there_applicable_sys_type == True:`  
    - Create dictionary of hvac systems, zones, and terminal units: `dict_of_zones_and_terminal_units_served_by_hvac_sys = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMI)`
    - For each hvac system in the B_RMI: `for hvac in B_RMI...HeatingVentilatingAirConditioningSystem:` 
        - Check if system type is of an applicable system type, if yes then carry on, if no then NOT_APPLICABLE for the hvac system:  `If any(hvac.id in baseline_hvac_system_dict[sys_type] for sys_type in ["SYS-3", "SYS-3a", "SYS-3b", "SYS-3c", "SYS-4", "SYS-5", "SYS-5b", "SYS-6", "SYS-6b","SYS-7", "SYS-7a", "SYS-7b", "SYS-7c","SYS-8", "SYS-8a", "SYS-8b", "SYS-8c","SYS-11.1", "SYS-11.1a", "SYS-11b", "SYS-11c","SYS-11.2","SYS-11.2a","SYS-12", "SYS-12a", "SYS-12b", "SYS-12c","SYS-13", "SYS-13a"]): `       
            - Get the list of zones associated with the hvac system: `zone_list = dict_of_zones_and_terminal_units_served_by_hvac_sys[hvac.id]["ZONE_LIST"]`  
            - Reset supply cfm to zero: `supply_cfm_b = 0`  
            - Reset total_fan_power to zero: `total_fan_power = 0`   
            - Reset fan_power_W_CFM to zero: `fan_power_W_CFM = 0`    
            - Reset total exhaust cfm: `total_exhaust_cfm = 0`       
            - Reset total relief cfm: `total_relief_cfm = 0`       
            - Get the fan system object:  `fan_sys_b = hvac.fan_system`  
            - Get list of supply fan fan objects: `fan_sys_supply_list = list(fan_sys_b.supply_fans)`  
            - Get list of return fan fan objects: `fan_sys_return_list = list(fan_sys_b.return_fans)`
            - Get list of relief fan fan objects: `fan_sys_relief_list = list(fan_sys_b.relief_fans)`
            - Get list of exhaust fan fan objects: `fan_sys_exhaust_list = list(fan_sys_b.exhaust_fans)`
                    
                Below cycles through all fans associated with the HVAC system and sums the total fan kW.
                - Cycle through the list of supply fans: `for fan_b in fan_sys_supply_list:`  
                    - Get the supply cfm and add to cumulative supply cfm as the logic cycles through the supply fans: `supply_cfm_b = supply_cfm_b + fan_b.design_airflow`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`
                - Cycle through the list of return fans: `for fan_b in fan_sys_return_list:`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`
                - Cycle through the list of relief fans: `for fan_b in fan_sys_relief_list:`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`    
                    - Get the cfm: `total_relief_cfm =  total_relief_cfm + fan_b.design_airflow` 
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`       
                - Cycle through the list of exhaust fans: `for fan_b in fan_sys_exhaust_list:`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,fan_b)`   
                    - Get the cfm: `total_exhaust_cfm =  total_exhaust_cfm + fan_b.design_airflow`  
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`     
                - Cycle through each zone associated with the HVAC system to get the exhaust fan power: `for zone_b in zone_list:`  
                    - Create a zone object from the zone id (not sure how the RCT will do this): `zone_b_obj = zone_b`  
                    - Check if there are any exhaust fan objects associated with the zone: `if zone_b_obj.zonal_exhaust_fan != Null:`  
                        - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,zone_b_obj.zonal_exhaust_fan)`    
                        - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`                    
            
            Below determines the expected fan power
            - Check if there are any energy recovery objects associated with the fan system object: `if fan_sys_b.air_energy_recovery != Null:` 
                - Get the enthalpy recovery ratio: `enthalpy_rec_ratio = fan_sys_b.air_energy_recovery.enthalpy_recovery_ratio`  
                - Assume that the outdoor air flow through the ERV is equal to the minimum outdoor airflow: `ERV_OA_air_flow = fan_sys_b.minimum_outdoor_airflow`  
                - Assume that the exhaust air flow through the ERV is equal to the maximum of either the total exhaust cfm or total relief cfm associated with the fan system: `ERV_Ex_air_flow = max(total_exhaust_cfm,total_relief_cfm)`  
                - Calculate A per Section 6.5.3.1.1: `A = (((2.2*enthalpy_rec_ratio)-0.5) *(ERV_Ex_air_flow + ERV_OA_air_flow))/4131`  
            
            - Check if system type is constant volume:  `If any(hvac.id in baseline_hvac_system_dict[sys_type] for sys_type in ["SYS-3", "SYS-3a", "SYS-3b", "SYS-3c", "SYS-4", "SYS-12", "SYS-12a", "SYS-12b", "SYS-12c","SYS-13", "SYS-13a"]): `   
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.00094 * supply_cfm_b) + A`  
            - Else if the system type is variable volume and not system 11: `Elif any(hvac.id in baseline_hvac_system_dict[sys_type] for sys_type in ["SYS-5", "SYS-5b", "SYS-6", "SYS-6b","SYS-7", "SYS-7a", "SYS-7b", "SYS-7c","SYS-8", "SYS-8a", "SYS-8b", "SYS-8c"]): `  
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.0013 * supply_cfm_b) + A`  
            - Else, the system is system 11: `Else:`  
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.00062 * supply_cfm_b) + A`  

            - Get the motor efficiency from Table G3.9.1 (should be looked up based on the next motor size greater than the bhp (i.e., expected_BHP)): `motor_eff = data_lookup(G3.9.1,expected_BHP)`  
            - Calculate the expected Wattage (assuming no other pressure drop adjustments apply except energy recovery): `fan_Wattage_expected = expected_BHP * 746 *(1/motor_eff)`  

            - **Rule Assertion:** 
            - Case 1: If fan wattage expected equals total fan power: `if total_fan_power == fan_Wattage_expected: outcome = "PASS"`  
            - Case 2: Elif conservative comparison less equal:`elif AHJ_RA_compare == True and total_fan_power <= fan_Wattage_expected: PASS`
            - Case 3: Else, undetermined: `Else: outcome = "UNDETERMINED" and raise_message "Fan power for <hvac.id> is greater than expected per Section and Table G3.1.2.9 assuming no pressure drop adjustments per Table 6.5.3.1-2 other than energy recovery (if modeled). Conduct manual check."`  

**Notes/Questions:**  
1. I don't need case 1 but I put it here just so the RCT could see the "perfect" result.  
2. There is not an explicit schema data element for ERV exhaust and OA air flow so I made some assumptions. See above.
3. Most projects probably qualify for MERV filter pressure drop adjustments and also sound attenuation so this may often land an undetermined outcome. 

**[Back](_toc.md)**

[def]: - Ch