# Section 19 - Rule 19-19       
**Schema Version:** 0.0.23    
**Mandatory Rule:** True    
**Rule ID:** 19-19     
**Rule Description:** For baseline systems 3 through 8, and 11, 12, and 13, the system fan electrical power for supply, return, exhaust, and relief shall be Pfan = bhp Ã— 746/fan motor efficiency. Where, bhp = brake horsepower of baseline fan motor from Table G3.1.2.9; fan motor efficiency = the efficiency from Table G3.9.1 for the next motor size greater than the bhp using a totally enclosed fan cooled motor at 1800 rpm.      
**Rule Assertion:** Options are Pass/UNDETERMINED/NOT_APPLICABLE     
**Appendix G Section:** G3.1.2.9          
**90.1 Section Reference:** Table G3.9.1    

**Data Lookup:** Table G3.9.1    

**Evaluation Context:** Each HeatingVentilatingAirConditioningSystem  

**Applicability Checks:** 
1. Applies to baseline systems 3 through 8, and 11, 12, and 13.

**Function Calls:**  
1. get_baseline_system_types()    
2. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()   
3. get_fan_object_electric_power()  
4. get_fan_system_object_supply_return_exhaust_relief_total_kW_CFM()  
5. baseline_system_type_compare()  

## Rule Logic:   
**Applicability Check 1**   
- Create a list of the target system types: `target_system_types = [HVAC_SYS.SYS_3, HVAC_SYS.SYS_4, HVAC_SYS.SYS_5, HVAC_SYS.SYS_6, HVAC_SYS.SYS_7, HVAC_SYS.SYS_8, HVAC_SYS.SYS_11, HVAC_SYS.SYS_12, HVAC_SYS.SYS_13]`  
- Create dictionary of baseline system types: `baseline_system_types_dict = get_baseline_system_types(B_RMI)`  
- Check if B-RMI is modeled with at least one air-side system that is of type associated with the target systems, if yes then carry on, if no then NOT_APPLICABLE for the project: `if any(baseline_system_type_compare(system_type, target_sys_type, false) for system_type in baseline_hvac_system_dict.keys() for target_system_type in target_system_types):`  
    - Create dictionary of hvac systems, zones, and terminal units: `dict_of_zones_and_terminal_units_served_by_hvac_sys = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMI)`
    - For each hvac system in the B_RMI: `for hvac in B_RMI...HeatingVentilatingAirConditioningSystem:` 
        - Get the baseline system type: `sys_type = list(baseline_system_types_dict.keys())[list(baseline_system_types_dict.values()).index(hvac.id)])`
        - Check if system type is of an applicable system type, if yes then carry on, if no then NOT_APPLICABLE for the hvac system:  `if any(baseline_system_type_compare(sys_type, target_sys_type, false) for target_system_type in target_system_types):`         
            - Get the list of zones associated with the hvac system: `zone_list = dict_of_zones_and_terminal_units_served_by_hvac_sys[hvac.id]["ZONE_LIST"]`  
            - Reset supply cfm to zero: `supply_cfm_b = 0`  
            - Reset total_fan_power to zero: `total_fan_power = 0`   
            - Reset fan_power_W_CFM to zero: `fan_power_W_CFM = 0`    
            - Reset total exhaust cfm: `total_exhaust_cfm = 0`       
            - Reset total relief cfm: `total_relief_cfm = 0`       
            - Get the fan system object:  `fan_sys_b = hvac.fan_system`  
            - Get list with the hvac system's fan system's supply, return, exhaust and relief fan powers in kW: `fan_sys_kW = list(get_fan_system_object_supply_return_exhaust_relief_total_kW_CFM(B_RMI,fan_sys_b)["Fan_Power"])`  
            - Get list with the hvac system's fan system's supply, return, exhaust and relief fan CFM: `fan_sys_CFM = list(get_fan_system_object_supply_return_exhaust_relief_total_kW_CFM(B_RMI,fan_sys_b)["Fan_Power"]["Fan_CFM"])` 
                    
            - Get the hvac system total supply fan kW, need to get the first element in the list of fan powers:`hvac_sys_total_supply_fan_power_b = fan_sys_kW[0]` 
            - Get the hvac system total return fan kW, need to get the second element in the list of fan powers:`hvac_sys_total_return_fan_power_b = fan_sys_kW[1]` 
            - Get the hvac system total exhaust fan kW, need to get the third element in the list of fan powers:`hvac_sys_total_exhaust_fan_power_b = fan_sys_kW[2]` 
            - Get the hvac system total relief fan kW, need to get the fourth element in the list of fan powers:`hvac_sys_total_relief_fan_power_b = fan_sys_kW[3]`     

            - Calculate the total modeled fan power for the hvac system in the baseline: `total_fan_power = hvac_sys_total_supply_fan_power_b + hvac_sys_total_return_fan_power_b + hvac_sys_total_exhaust_fan_power_b + hvac_sys_total_relief_fan_power_b`  
            - Get the total supply cfm, need to get the first element in the list of fan CFMs: `supply_cfm_b = fan_sys_CFM[0]` 
            - Get the total exhaust cfm, need to get the third element in the list of fan CFMs: `total_exhaust_cfm = fan_sys_CFM[2]`   
            - Get the total relief cfm, need to get the four element in the list of fan CFMs: `total_relief_cfm = fan_sys_CFM[3]`  

            - Cycle through each zone associated with the HVAC system to get the exhaust fan power: `for zone_b in zone_list:`  
                - Create a zone object from the zone id (not sure how the RCT will do this): `zone_b_obj = zone_b`  
                - Check if there are any exhaust fan objects associated with the zone: `if zone_b_obj.zonal_exhaust_fan != Null:`  
                    - Get the fan power: `fan_elec_power = get_fan_object_electric_power(B_RMI,zone_b_obj.zonal_exhaust_fan)`    
                    - Add to the total power: `total_fan_power = total_fan_power + fan_elec_power`                    
            
            Below determines the expected fan power:
            - Check if there are any energy recovery objects associated with the fan system object: `if fan_sys_b.air_energy_recovery != Null:` 
                - Get the enthalpy recovery ratio: `enthalpy_rec_ratio = fan_sys_b.air_energy_recovery.enthalpy_recovery_ratio`  
                - Assume that the outdoor air flow through the ERV is equal to the minimum outdoor airflow: `ERV_OA_air_flow = fan_sys_b.minimum_outdoor_airflow`  
                - Assume that the exhaust air flow through the ERV is equal to the maximum of either the total exhaust cfm or total relief cfm associated with the fan system: `ERV_Ex_air_flow = max(total_exhaust_cfm,total_relief_cfm)`  
                - Calculate A per Section 6.5.3.1.1: `A = (((2.2*enthalpy_rec_ratio)-0.5) *(ERV_Ex_air_flow + ERV_OA_air_flow))/4131`  
            
            - Check if the air_filter_merv_rating was populated: `if fan_sys_b.air_filter_merv_rating != Null:`  
                - Get the MERV filter rating: `MERV_rating = fan_sys_b.air_filter_merv_rating`  
            - Else: `Else: MERV_rating = 0`  
            - Determine the pressure drop adjustment in in. of water if MERV is 9 through 12: `if MERV_rating >= 9 and MERV_rating <=12: MERV_adj = 0.5`  
            - Else if, MERV is 13 and above (assume 0.9 for all MERVs greater than 12 since we do not know the pressure drop for MERV 16 and greater): `elif MERV_rating >12: MERV_adj = 0.9`  
            - Else: `Else: MERV_rating = 0`  
            - Calculate A per Section 6.5.3.1.1 for MERV assuming cfmd equals the supply cfm: `A = A + (MERV_adj * supply_cfm_b/4131)`  
            
            - Create a list of the CV system types: `CV_system_types = [HVAC_SYS.SYS_3, HVAC_SYS.SYS_4,HVAC_SYS.SYS_12, HVAC_SYS.SYS_13]`  
            - Check if system type is constant volume:  `if any(baseline_system_type_compare(sys_type, target_sys_type, false) for target_system_type in CV_system_types):`     
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.00094 * supply_cfm_b) + A`  
            - Else if the system type is variable volume and not system 11: `Elif any(baseline_system_type_compare(sys_type, target_sys_type, false) for target_system_type in [HVAC_SYS.SYS_5, HVAC_SYS.SYS_6, HVAC_SYS.SYS_7, HVAC_SYS.SYS_8]): `  
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.0013 * supply_cfm_b) + A`  
            - Else, the system is system 11: `Else:`  
                - Calculate the expected BHP (if no other pressure drop adjustments apply): `expected_BHP = (0.00062 * supply_cfm_b) + A`  

            - Get the motor efficiency from Table G3.9.1 (should be looked up based on the next motor size greater than the bhp (i.e., expected_BHP)): `motor_eff = data_lookup(G3.9.1,expected_BHP)`  
            - Calculate the expected Wattage (assuming no other pressure drop adjustments apply except energy recovery): `fan_Wattage_expected = expected_BHP * 746 *(1/motor_eff)`  

            - **Rule Assertion:** 
            - Case 1: If fan wattage expected equals total fan power: `if total_fan_power == fan_Wattage_expected: outcome = "PASS"`  
            - Case 2: Elif conservative comparison less equal:`elif AHJ_RA_compare == True and total_fan_power <= fan_Wattage_expected: PASS`
            - Case 3: Else, undetermined: `Else: outcome = "UNDETERMINED" and raise_message "Fan power for <hvac.id> is greater than expected per Section and Table G3.1.2.9 assuming no pressure drop adjustments (e.g., sound attenuation, air filtration, fully ducted return when required by code, airflow control devices, carbon and other gas-phase air cleaners, coil runaround loops, evaporative humidifier/coolers in series with another cooling coil, exhaust systems serving fume hoods, and laboratory and vivarium exhaust systems in high-rise buildings) per Table 6.5.3.1-2 other than energy recovery and MERV filters defined in the RMD (if modeled). Expected Wattage = <insert fan_Wattage_expected> however not all pressure drop adjustments are able to be captured in the RMD so conduct manual check."`   

**Notes/Questions:**  
1. There is not an explicit schema data element for ERV exhaust and OA air flow so I made some assumptions. See above.  


**[Back](_toc.md)**

[def]: - Ch