
# CHW&CW - Rule 22-33  

**Schema Version:** 0.0.10  
**Mandatory Rule:** True  
**Rule ID:** 22-33  
**Rule Description:** Baseline chilled water system that does not use purchased chilled water must only have no more than one CHW plant and be modeled as primary seconday and baseline purchased CHW systems must only have one external fluid loop.  
**Rule Assertion:** B-RMR = expected value  
**Appendix G Section:** Section 22 CHW&CW Loop  
**90.1 Section Reference:** Section G3.1.3.2 Building System-Specific Modeling Requirements for the Baseline model  
**Data Lookup:** None  
**Evaluation Context:** Building  
**Applicability Checks:**  

1. B-RMR is modeled with at least one air-side system that is Type-7, 8, 11.1, 11.2, 12, 13, 7b, 8b, 11b, 12b, 13b (non purchased CHW), 1a, 1c, 3a, 3c, 7a, 7c, 8a, 8c, 11b, 11c, 11.2a, 12a, 12c, 13a (purchased CHW).

**Function Calls:**  

1. get_baseline_system_types()
2. get_primary_secondary_loops()
3. get_dict_of_zones_and_terminal_units_served_by_hvac_sys()

**Applicability Checks:**  

- **Check 1:** Get B-RMR system types: `baseline_hvac_system_dict = get_baseline_system_types(B-RMR)`
  - Set expectation boolean variables to FALSE (i.e., what is expected based on system types): `primary_secondary_expected = FALSE`
  - Set expectation boolean variables to FALSE (i.e., what is expected based on system types): `external_loop_expected = FALSE`
  - Check if B-RMR is modeled with at least one air-side system that is Type-7, 8, 11.1, 11.2, 12, 13, 7b, 8b, 11b, 12b, 13b, i.e. with air-side system served by chiller(s): `if any(sys_type in baseline_hvac_system_dict.keys() for sys_type in ["SYS-7", "SYS-8", "SYS-11.1", "SYS-11.2", "SYS-12", "SYS-13", "SYS-7B", "SYS-8B", "SYS-11B", "SYS-12B", "SYS-13B"]): primary_secondary_expected = TRUE`
  - Else if, check if HVAC system is baseline system Type 1a, 1c, 3a, 3c, 7a, 7c, 8a, 8c, 11b, 11c, 11.2a, 12a, 12c, 13a (systems with purchased CHW): `elif any(hvac.id in baseline_hvac_system_dict[sys_type] for sys_type in ["SYS-1a", "SYS-1c", "SYS-3a", "SYS-3c", "SYS-7a", "SYS-7c", "SYS-8a", "SYS-8c", "SYS-11b", "SYS-11c", "SYS-11.2a", "SYS-12a", "SYS-12c", "SYS-13a"]): external_loop_expected =  TRUE`  
  - Else, rule is not applicable to B-RMR: `else: RULE_NOT_APPLICABLE`  

## Rule Logic:  
- Get dictionary of zones and terminal unit IDs associated with each HVAC system in the RMR to pass to the sub functions: `dict_of_zones_and_terminal_units_served_by_hvac_sys  = get_dict_of_zones_and_terminal_units_served_by_hvac_sys(B_RMR)`  
- Get number of primary loops in B-RMR: `num_primary_loops = LEN(primary_secondary_loop_dictionary)`  
- Get number of secondary loops in B-RMR: `num_secondary_loops = SUM( LEN(primary_secondary_loop_dictionary[primary_loop]) for primary_loop in primary_secondary_loop_dictionary.keys() )`
- Check if RMR is modeled with external fluid source: `if B-RMR.RuleModelInstance.external_fluid_source != Null:`  
  - For each external fluid source in B_RMR: `for external_fluid_source.id in B-RMR.RuleModelInstance.external_fluid_source:`  
      - Check if external fluid source is chilled water: `if external_fluid_source.id.type == "CHILLED_WATER"`    
          - Add the associated loop to the purchased_chilled_water_loop_list_b list: `purchased_chilled_water_loop_list_b = purchased_chilled_water_loop_list_b.append (external_fluid_source.id)`  
      - Check if there are CHW exterior fluid sources: `if len(purchased_chilled_water_loop_list_b) != Null AND len(purchased_chilled_water_loop_list_b) != 0:`  
        - For each HVAC system in the B_RMR: `for hvac in B_RMR...HeatingVentilationAirConditioningSystem`  
          - Check if HVAC system is baseline system Type 1a, 1c, 3a, 3c, 7a, 7c, 8a, 8c, 11b, 11c, 11.2a, 12a, 12c, 13a (systems with purchased CHW): `if any(hvac.id in baseline_hvac_system_dict[sys_type] for sys_type in ["SYS-1a", "SYS-1c", "SYS-3a", "SYS-3c", "SYS-7a", "SYS-7c", "SYS-8a", "SYS-8c", "SYS-11b", "SYS-11c", "SYS-11.2a", "SYS-12a", "SYS-12c", "SYS-13a"]):`  
            - If the system type is not 1a or 1c then save chilled water loop that serves cooling systems to non-process CHW coil loop array (array for all loops connected to cooling coils): `if hvac.id Not in baseline_hvac_system_dict["SYS-1c"] and hvac.id Not in baseline_hvac_system_dict["SYS-1a"]: non_process_chw_coil_loop_array.append(hvac.cooling_system[0].chilled_water_loop)` 
            - Else (Sys-1a or Sys-1c): `Else:`  
              - Get list of terminal units associated with the hvac system from the dictionary: `terminal_unit_id_list = dict_of_zones_and_terminal_units_served_by_hvac_sys[hvac.id]["Terminal_Unit_List"]`  
              - Loop through terminals to get CHW loops: `for terminal in terminal_unit_id_list: non_process_chw_coil_loop_array.append(terminal.cooling_from_loop)`   
        - For each external CHW loop, check if its non process: `For CHW_external_loop in purchased_chilled_water_loop_list_b:`  
          - Check if its a non process loop: `if CHW_external_loop in non_process_chw_coil_loop_array: chw_loop_count += 1` 

**Rule Assertion - Component:**

- Case 1: If only one CHW primary and one secondary loop is modeled and primary-scondary is expected: `if ( num_primary_loops == 1 ) AND ( num_secondary_loops == 1 ) AND primary_secondary_expected == TRUE: PASS`
- Case 2: If only one external CHW loop is modeled and an external loop is expected: `if chw_loop_count == 1 AND external_loop_expected == TRUE: PASS`
- Case 3: Else: `else: FAIL`

**[Back](../_toc.md)**

**Notes:**

1. Treat all buildings under RMR as one building.
2. Updated the Rule ID from 22-34 to 22-33 on 7/26/2022
3. Updated to also include purchased CHW loop on 8/30/2022.
4. Could not locate the rule ID in the rule test spreadsheet to update the description to also include purchased CHW.  
