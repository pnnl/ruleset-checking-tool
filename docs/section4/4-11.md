# Airside System - Rule 4-11  
**Schema Version:** 0.0.12  
**Mandatory Rule:** True  
**Rule ID:** 4-11    
 
**Rule Description:** Fan Schedules may be allowed to differ when Section G3.1.1(c) applies, i.e. baseline HVAC system type 3 or 4 has been used for spaces (zones) that differ by more than 40 equivalent full load hrs/week from other spaces (zones) served by the system or when the total peak internal gains that differ by 10 Btu/h·ft2 or more from the average of other HVAC zones served by the system.  

**Rule Assertion:** P-RMR = B-RMR                                           
**Appendix G Section:** Table G3.1 Section 4 Baseline Exception 3  
**Appendix G Section Reference:** None  
**Data Lookup:** None  
**Evaluation Context:** Evaluate each HeatingVentilationAirAconditioningSystem   

**Applicability Checks:** 

1. Applies when baseline HVAC system type 3 or 4 has been used for spaces (zones) that differ by more than 40 equivalent full load hrs/week from other spaces (zones) served by the system or when the total peak internal gains that differ by 10 Btu/h·ft2 or more from the average of other HVAC zones served by the system.    

**Function Call:** 

1. get_baseline_system_types()     
2. get_hvac_system_with_longest_fan_schedule()  
3. match_data_element()  
4. get_dict_of_zones_hvac_sys_serving_specific_floor()  
5. 

## Rule Logic:  
**Applicability Check 1:**  
- Get dictionary for finding baseline system types for hvac systems: `baseline_hvac_sys_type_ids_dict_b = get_baseline_system_types(B_RMR)`
- For each zone in the P_RMR: `for zone_p in P_RMR...Zone:`
    - Reset schedule mismatch variable which is used to track if the schedules mismatch: `schedule_mismatch = FALSE`
    - Get hvac system with the longest fan operating schedule in the proposed to compare to baseline: `hvac_p = get_hvac_system_with_longest_fan_schedule_p(zone_p.id, P_RMR)`
    - Get hvac system with the longest fan operating schedule in the baseline to compare to proposed (should only be one system in the baseline but just in case we look for the longest): `hvac_b = get_hvac_system_with_longest_fan_schedule(match_data_element(B_RMR,Zone,zone_p.id).id, B_RMR)`
    - Get fan schedule associated with the longest fan operating schedule in the proposed to compare to baseline: `fan_schedule_p = hvac_p.fan_systems[0].operating_schedule.hourly_values`
    - Get fan schedule associated with the baseline system: `fan_schedule_b = hvac_b.fan_systems[0].operating_schedule.hourly_values` 
    - Loop through each hour of the schedules and compare across the B_RMR and P_RMR, : `for x in len(fan_schedule_b):`
        - Check if schedules matches for each hour of the year, if there is a mismatch then set the schedule_mismatch boolean variable equal to TRUE and carry out other logic below: `if fan_schedule_b.hourly_values(x) != fan_schedule_p.hourly_values(x):`  
            - Set schedule_mismatch boolean variable to TRUE: `schedule_mismatch = TRUE`
            - Get the baseline system type: `hvac_sys_type_b = baseline_hvac_sys_type_ids_dict_b.keys()[list(baseline_hvac_sys_type_ids_dict_b.values()).index(hvac_b.id)]`
            - Check if system type is 3 or 4: `if hvac_sys_type_b in ["SYS-3","SYS-3a","SYS-3b, SYS-4"]:`
                - Get the floor name associated with the zone: `floor_name = match_data_element(B_RMR,Zone,zone_p.id).floor_name`
                - Get dictionary of zones and hvac systems associated with the floor name: `dict_of_zones_hvac_systems_serving_specific_floor = get_dict_of_zones_hvac_sys_serving_specific_floor(floor_name,B_RMR)`
                - Create list of hvac system serving the floor from the dictionary: `list_hvac_sys_serving_floor = list(dict_of_zones_hvac_systems_serving_specific_floor.values())`
                - Reset hvac type check boolean variable: `hvac_type_check = FALSE`
                - Loop through and check if any systems are of type 5, 5b, 6, 6b, 7, 7a, 7b, 7c, 8, 8a, 8b, 8c: `for hvac_flr in list_hvac_sys_serving_floor:`
                    - Check if the system is of type 5, 5b, 6, 6b, 7, 7a, 7b, 7c, 8, 8a, 8b, 8c: `if Baseline_hvac_sys_type_ids_dict_b.keys()[list(baseline_hvac_sys_type_ids_dict_b.values()).index(hvac_flr.id)] in ["SYS-5","SYS-5b","SYS-6, SYS-6b", SYS-7",SYS-7a",SYS-7b",SYS-7c",SYS-8",SYS-8a",SYS-8b",SYS-8c"]:`
                        - Set hvac_type_check boolean variable to TRUE: `hvac_type_check = TRUE`
                - Check if there is system types 5,6,7,8 on the floor via the hvac_type_check boolean variable: `if hvac_type_check == TRUE:`
                    - Check if the zone is served by a multizone system in the proposed: 



 **[Back](../_toc.md)**